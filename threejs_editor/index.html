<!DOCTYPE html>
<html lang="it">
<head>
 <meta charset="UTF-8">
 <meta name="viewport" content="width=device-width, initial-scale=1.0">
 <title>VisualArte3D - Three.js Crossfade Editor</title>
 
 <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
 <link rel="stylesheet" href="css/style.css">
</head>
<body>
 <!-- Modal Incrocio -->
 <div class="modal-overlay" id="modalIncrocio">
 <div class="modal-content">
 <h3>Configura Navigazione</h3>
 <p>Seleziona la destinazione per questo punto</p>
 
 <label>Foto Destinazione:</label>
 <select id="targetFotoSelect">
 <option value="">-- Seleziona --</option>
 </select>
 
 <div class="modal-buttons">
 <button class="btn-cancel" id="btn-cancel-incrocio">❌ Annulla</button>
 <button class="btn-confirm" id="btn-confirm-incrocio">✅ Conferma</button>
 </div>
 </div>
 </div>

 <!-- Modal CHIEDI (MP4/Video/Audio/Immagini) -->
 <div class="modal-overlay" id="modalChiedi">
 <div class="modal-content">
 <h3>🎬 Configura Contenuti Multimediali</h3>
 <p>Aggiungi video, audio o immagini</p>
 
 <label>📹 Video:</label>
 <select id="chiediVideoSelect" style="width: 100%; padding: 8px; margin: 5px 0;">
 <option value="">-- Nessuno --</option>
 <option value="../media/videos/7534448-hd_1920_1080_24fps.mp4">🎬 Scultura Dettaglio HD (4.7 MB)</option>
 <option value="../media/videos/8946791-hd_2160_3840_30fps.mp4">🎥 Scultura Legno 4K (2.1 MB)</option>
 <option value="../media/videos/Geometric_Sculpture_Of_Rodrigo_Santa_Cruz_Anchissi_G55235.mp4">🎨 Scultura Geometrica Moderna (47 MB)</option>
 </select>
 
 <label>🎵 Audio:</label>
 <select id="chiediAudioSelect" style="width: 100%; padding: 8px; margin: 5px 0;">
 <option value="">-- Nessuno --</option>
 <option value="../media/audio/museum-aquarium-classical.mp3">🎼 Aquarium - Saint-Saëns (5.9 MB)</option>
 <option value="../media/audio/museum-gymnopedie-ambient-piano.mp3">🎹 Gymnopedie - Erik Satie (3.8 MB)</option>
 <option value="../media/audio/museum-canon-classical.mp3">🎻 Canon in Re - Pachelbel (11.8 MB)</option>
 </select>
 
 <label>🖼️ Galleria Immagini:</label>
 <div id="chiediImagesCheckboxes" style="max-height: 150px; overflow-y: auto; border: 1px solid #666; padding: 10px; margin: 10px 0;">
 <label style="display: block; margin: 5px 0;">
 <input type="checkbox" value="../media/images/wilhelm-gunkel-LpQs_3t4Dck-unsplash.jpg">
 📸 Statua Marmorea Greca - Museo (5.7 MB)
 </label>
 <label style="display: block; margin: 5px 0;">
 <input type="checkbox" value="../media/images/pexels-akerraren-adarrak-53800756-7788801.jpg">
 🏛️ Apollo con Lira - Scultura Ellenistica (1.2 MB)
 </label>
 <label style="display: block; margin: 5px 0;">
 <input type="checkbox" value="../media/images/pexels-martinpechy-2844464.jpg">
 ⛲ Fontana di Trevi - Dettaglio Scultoreo (1.7 MB)
 </label>
 <label style="display: block; margin: 5px 0;">
 <input type="checkbox" value="../media/images/tuva-mathilde-loland-6vFFR4AOEe4-unsplash.jpg">
 🗿 Statua Greca Classica - Barcellona (1.3 MB)
 </label>
 </div>
 
 <div class="modal-buttons">
 <button class="btn-cancel" id="btn-cancel-chiedi">❌ Annulla</button>
 <button class="btn-confirm" id="btn-confirm-chiedi">✅ Salva</button>
 </div>
 </div>
 </div>

 <!-- Modal MORE (Testo/Wikipedia) -->
 <div class="modal-overlay" id="modalMore">
 <div class="modal-content">
 <h3>ℹ️ Configura Informazioni</h3>
 <p>Aggiungi testo e link</p>
 
 <label>📝 Titolo:</label>
 <input type="text" id="moreTitleInput" placeholder="Es: Storia del Museo" style="width: 100%; padding: 8px; margin: 5px 0;">
 
 <label>📄 Testo Descrittivo:</label>
 <textarea id="moreTextInput" placeholder="Inserisci il testo completo con dettagli storici, informazioni, ecc..." style="width: 100%; height: 120px; padding: 8px; margin: 5px 0;"></textarea>
 
 <label>🌐 Link Wikipedia (opzionale):</label>
 <input type="text" id="moreWikipediaInput" placeholder="https://it.wikipedia.org/wiki/..." style="width: 100%; padding: 8px; margin: 5px 0;">
 
 <div class="modal-buttons">
 <button class="btn-cancel" id="btn-cancel-more">❌ Annulla</button>
 <button class="btn-confirm" id="btn-confirm-more">✅ Salva</button>
 </div>
 </div>
 </div>

 <!-- Modal 3D (Sketchfab) -->
 <div class="modal-overlay" id="modal3d">
 <div class="modal-content" style="max-width: 700px;">
 <h3>🗿 Configura Modello 3D</h3>
 <p>Aggiungi modello 3D interattivo da Sketchfab</p>
 
 <label>📝 Titolo Modello:</label>
 <input type="text" id="tredTitleInput" placeholder="Es: Venere di Milo" style="width: 100%; padding: 8px; margin: 5px 0;">
 
 <label>📄 Descrizione:</label>
 <textarea id="tredDescInput" placeholder="Descrizione storica, dettagli artistici..." style="width: 100%; height: 80px; padding: 8px; margin: 5px 0;"></textarea>
 
 <label>🔗 Model ID Sketchfab:</label>
 <input type="text" id="tredSketchfabInput" placeholder="Es: 53082b5d6cef4c34a9701a2a24f58075" style="width: 100%; padding: 8px; margin: 5px 0;">
 
 <div style="background: rgba(33, 150, 243, 0.1); border-left: 3px solid #2196F3; padding: 15px; margin: 15px 0; border-radius: 5px; font-size: 13px;">
 <strong>💡 Come ottenere il Model ID:</strong><br>
 1. Vai su Sketchfab.com<br>
 2. Cerca il modello (es: "Venus de Milo")<br>
 3. Apri la pagina del modello<br>
 4. L'URL sarà tipo: <code>sketchfab.com/3d-models/nome-<strong>abc123xyz</strong></code><br>
 5. Copia solo la parte finale (<strong>Model ID</strong>)
 </div>
 
 <div style="background: rgba(76, 175, 80, 0.1); border-left: 3px solid #4CAF50; padding: 12px; margin: 10px 0; border-radius: 5px; font-size: 12px;">
 <strong>✅ Modelli già pronti (Pubblico Dominio):</strong><br>
 • Venere di Milo: <code>53082b5d6cef4c34a9701a2a24f58075</code><br>
 • Apollo Belvedere: <code>fe5c0cffdc2a4f3985872212c692af0c</code><br>
 • David (testa): <code>d29af50360624e5e9b1855666475380d</code><br>
 • Nike Samotracia: <code>4edd6459f2834e7ab0b395e71cee2513</code>
 </div>
 
 <div class="modal-buttons">
 <button class="btn-cancel" id="btn-cancel-3d">❌ Annulla</button>
 <button class="btn-confirm" id="btn-confirm-3d">✅ Salva</button>
 </div>
 </div>
 </div>

 <!-- PREVIEW MODE FULLSCREEN -->
 <div id="preview-mode" class="preview-mode">
 <div class="preview-controls">
 <!-- 🙈 DROPDOWN NASCOSTO - Solo thumbnail nel footer -->
 <!-- <select id="preview-route-selector" style="display: none;">
 <option value="">Cambia Percorso...</option>
 </select> -->
 <button id="preview-floorplan" style="background: linear-gradient(135deg, #2196F3, #1976D2);">🗺️ Floor Plan (F)</button>
 <button id="preview-close" class="close-btn">❌ Chiudi</button>
 </div>
 <div class="preview-info">
 <h3 id="preview-title">Titolo</h3>
 <p id="preview-desc">Descrizione</p>
 <div class="preview-progress-bar">
 Punto <span id="preview-progress">1/5</span>
 </div>
 </div>
 <div id="preview-container"></div>
 </div>

 <div class="main-container">
 <!-- Pannello Sinistro -->
 <div class="left-panel">
 <h2>📦 PERCORSI</h2>
 
 <div class="info-box">
 <strong>✅ FEATURES COMPLETE</strong>
 🌀 WebGL Crossfade shader<br>
 🎬 Footer thumbnail navigation<br>
 📐 Floor Plan overview<br>
 🎯 4 tipi hotspot completi
 </div>
 
 <div class="new-route-section">
 <h4>➕ Nuovo Percorso</h4>
 <input type="text" id="nomePercorso" placeholder="Nome percorso">
 <button>CREA</button>
 </div>
 
 <div class="route-list">
 <h4>💾 Salvati</h4>
 <div id="listaPercorsi"></div>
 </div>
 
 <!-- BULK ACTIONS: SALVA/CARICA TUTTO -->
 <div class="bulk-actions" style="padding: 15px; border-top: 2px solid rgba(102,126,234,0.3); margin-top: 15px;">
 <button id="saveAllBtn" style="width: 100%; padding: 12px; margin-bottom: 8px; background: linear-gradient(135deg, #4CAF50, #45a049); color: white; border: none; border-radius: 8px; font-weight: 600; cursor: pointer; font-size: 14px;">
 💾 SALVA TUTTO
 </button>
 <button id="loadAllBtn" style="width: 100%; padding: 12px; background: linear-gradient(135deg, #2196F3, #1976D2); color: white; border: none; border-radius: 8px; font-weight: 600; cursor: pointer; font-size: 14px;">
 📂 CARICA TUTTO
 </button>
 <input type="file" id="loadAllInput" accept=".json" style="display: none;">
 </div>
 
 <div class="reset-section">
 <button>🔄 Reset</button>
 </div>
 </div>
 
 <!-- Pannello Centro -->
 <div class="center-panel">
 <div class="toolbar">
 <div class="toolbar-left">
 <label>📸 Foto:</label>
 <select id="fotoSelect"></select>
 </div>
 
 <div class="type-selector">
 <button class="type-btn active" id="btn-incrocio">🟢 NAV</button>
 <button class="type-btn" id="btn-chiedi">🟠 MP4</button>
 <button class="type-btn" id="btn-more">🔵 INFO</button>
 <button class="type-btn" id="btn-tred">🟣 3D</button>
 </div>
 </div>
 
 <div id="canvas-container"></div>
 </div>
 
 <!-- Pannello Destro -->
 <div class="right-panel">
 <h3>📍 Punto</h3>
 
 <div class="point-info">
 <label>Nome:</label>
 <input type="text" id="nomePunto" placeholder="Es: Atrio Ingresso">
 
 <label>Descrizione:</label>
 <input type="text" id="descrizionePunto" placeholder="Es: Hall principale del museo">
 </div>
 
 <h3>🎯 Hotspot (<span id="hotspotCount">0</span>)</h3>
 <div class="hotspot-list-container">
 <div id="hotspotList"></div>
 </div>
 
 <button class="add-to-route-btn" id="addToRouteBtn">
 ➕ Aggiungi Punto
 </button>
 </div>
 </div>
 
 <!-- Status Bar -->
 <div class="status-bar">
 <div class="status-info">
 <span>📸 <strong id="fotoCorrente">IMG_001</strong></span>
 <span>📦 <strong id="percorsoAttivo">Nessuno</strong></span>
 <span>📍 <strong id="puntiPercorso">0</strong> punti</span>
 </div>
 <div class="status-indicator">
 <div class="status-dot"></div>
 <span>✅ 4 Hotspot Types</span>
 </div>
 </div>

 <script type="module" src="js/app.js"></script>
</body>
</html>
